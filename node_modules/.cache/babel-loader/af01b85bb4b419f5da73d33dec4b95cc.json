{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createBackoff = createBackoff;\nvar backoff = {\n  exponential: function exponential(attempt, delay) {\n    return Math.floor(Math.random() * Math.pow(2, attempt) * delay);\n  },\n  fibonacci: function fibonacci(attempt, delay) {\n    var current = 1;\n\n    if (attempt > current) {\n      var prev = 1,\n          current = 2;\n\n      for (var index = 2; index < attempt; index++) {\n        var next = prev + current;\n        prev = current;\n        current = next;\n      }\n    }\n\n    return Math.floor(Math.random() * current * delay);\n  }\n};\n\nfunction createBackoff(type, options) {\n  return new Backoff(backoff[type], options);\n}\n\nfunction Backoff(func, options) {\n  this.func = func;\n  this.attempts = 0;\n  this.delay = typeof options.initialDelay !== \"undefined\" ? options.initialDelay : 100;\n}\n\nBackoff.prototype.backoff = function () {\n  setTimeout(this.onReady, this.func(++this.attempts, this.delay));\n};","map":{"version":3,"sources":["/Users/bacchus/git/Leap/node_modules/@gamestdio/websocket/lib/backoff.js"],"names":["Object","defineProperty","exports","value","createBackoff","backoff","exponential","attempt","delay","Math","floor","random","pow","fibonacci","current","prev","index","next","type","options","Backoff","func","attempts","initialDelay","prototype","setTimeout","onReady"],"mappings":"AAAA;;AAAaA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA8B,YAA9B,EAA2C;AAACC,EAAAA,KAAK,EAAC;AAAP,CAA3C;AAAyDD,OAAO,CAACE,aAAR,GAAsBA,aAAtB;AAAoC,IAAIC,OAAO,GAAC;AAACC,EAAAA,WAAW,EAAC,SAASA,WAAT,CAAqBC,OAArB,EAA6BC,KAA7B,EAAmC;AAAC,WAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAcF,IAAI,CAACG,GAAL,CAAS,CAAT,EAAWL,OAAX,CAAd,GAAkCC,KAA7C,CAAP;AAA4D,GAA7G;AAA8GK,EAAAA,SAAS,EAAC,SAASA,SAAT,CAAmBN,OAAnB,EAA2BC,KAA3B,EAAiC;AAAC,QAAIM,OAAO,GAAC,CAAZ;;AAAc,QAAGP,OAAO,GAACO,OAAX,EAAmB;AAAC,UAAIC,IAAI,GAAC,CAAT;AAAA,UAAWD,OAAO,GAAC,CAAnB;;AAAqB,WAAI,IAAIE,KAAK,GAAC,CAAd,EAAgBA,KAAK,GAACT,OAAtB,EAA8BS,KAAK,EAAnC,EAAsC;AAAC,YAAIC,IAAI,GAACF,IAAI,GAACD,OAAd;AAAsBC,QAAAA,IAAI,GAACD,OAAL;AAAaA,QAAAA,OAAO,GAACG,IAAR;AAAc;AAAC;;AAAA,WAAOR,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAcG,OAAd,GAAsBN,KAAjC,CAAP;AAAgD;AAA1V,CAAZ;;AAAwW,SAASJ,aAAT,CAAuBc,IAAvB,EAA4BC,OAA5B,EAAoC;AAAC,SAAO,IAAIC,OAAJ,CAAYf,OAAO,CAACa,IAAD,CAAnB,EAA0BC,OAA1B,CAAP;AAA2C;;AAAA,SAASC,OAAT,CAAiBC,IAAjB,EAAsBF,OAAtB,EAA8B;AAAC,OAAKE,IAAL,GAAUA,IAAV;AAAe,OAAKC,QAAL,GAAc,CAAd;AAAgB,OAAKd,KAAL,GAAW,OAAOW,OAAO,CAACI,YAAf,KAA8B,WAA9B,GAA0CJ,OAAO,CAACI,YAAlD,GAA+D,GAA1E;AAA+E;;AAAAH,OAAO,CAACI,SAAR,CAAkBnB,OAAlB,GAA0B,YAAU;AAACoB,EAAAA,UAAU,CAAC,KAAKC,OAAN,EAAc,KAAKL,IAAL,CAAU,EAAE,KAAKC,QAAjB,EAA0B,KAAKd,KAA/B,CAAd,CAAV;AAAgE,CAArG","sourcesContent":["\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.createBackoff=createBackoff;var backoff={exponential:function exponential(attempt,delay){return Math.floor(Math.random()*Math.pow(2,attempt)*delay);},fibonacci:function fibonacci(attempt,delay){var current=1;if(attempt>current){var prev=1,current=2;for(var index=2;index<attempt;index++){var next=prev+current;prev=current;current=next;}}return Math.floor(Math.random()*current*delay);}};function createBackoff(type,options){return new Backoff(backoff[type],options);}function Backoff(func,options){this.func=func;this.attempts=0;this.delay=typeof options.initialDelay!==\"undefined\"?options.initialDelay:100;}Backoff.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay));};"]},"metadata":{},"sourceType":"script"}