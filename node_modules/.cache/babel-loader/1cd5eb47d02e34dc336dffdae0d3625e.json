{"ast":null,"code":"import socketIOClient from 'socket.io-client';\nimport store from './store/';\nimport { ENDPOINT } from './constants/socket.types';\nimport { USER, LOBBY, ROOM, GAME, CHAT } from './constants/';\nimport ACTION from './actions';\n\nconst socketMiddleware = () => {\n  let socket;\n\n  const onConnect = store => event => {\n    console.log('Howdy!');\n  };\n\n  const onDisconnect = store => event => {\n    console.log('Bowdy?');\n  };\n\n  const onMessage = store => event => {//TODO: I guess this is where we handle the server data\n  };\n\n  return store => next => action => {\n    switch (action.type) {\n      case 'CONNECT':\n        if (socket) socket.close();\n        socket = socket(action.server);\n        socket.on('connect', onConnect(store)).on('message', onMessage(store)).on('disconnect', onDisConnect(store));\n        break;\n\n      case 'DISCONNECT':\n        if (socket) socket.close();\n        socket = null;\n        console.log('Disconnected.');\n        break;\n\n      case USER.LOGIN:\n      case USER.LOGOUT:\n        socket.emit('eventUser', action);\n        break;\n\n      case LOBBY.ADD_ROOM:\n      case LOBBY.REMOVE_ROOM:\n      case LOBBY.UPDATE:\n        socket.emit('eventLobby', action);\n        break;\n\n      case ROOM.ENTER:\n      case ROOM.EXIT:\n      case ROOM.SUBMIT_MOVE:\n      case ROOM.END_GAME:\n        socket.emit('eventRoom', action);\n        break;\n\n      case GAME.START:\n      case GAME.SELECT:\n      case GAME.END:\n        socket.emit('eventGame', action);\n        break;\n\n      default:\n        return next(action);\n    }\n  };\n}; // function Socket () {\n//   this.io = socketIOClient.connect('ws://localhost:3001');\n//\n//   this.io\n//     .on('connect', () => console.log('howdy'))\n//     .on(LOBBY.UPDATE, (data) => store.dispatch(ACTION.LOBBY.update(data)))\n//     .on(LOBBY.ADD_ROOM, (data) => store.dispatch(ACTION.LOBBY.update(data)))\n//     .on('recieveMove', data => {\n//       console.log(data);\n//     });\n// }\n//\n// const socket = new Socket();\n\n\nexport default socketMiddleware;","map":{"version":3,"sources":["/Users/bacchus/git/Leap/client/src/middleware/socket.js"],"names":["socketIOClient","store","ENDPOINT","USER","LOBBY","ROOM","GAME","CHAT","ACTION","socketMiddleware","socket","onConnect","event","console","log","onDisconnect","onMessage","next","action","type","close","server","on","onDisConnect","LOGIN","LOGOUT","emit","ADD_ROOM","REMOVE_ROOM","UPDATE","ENTER","EXIT","SUBMIT_MOVE","END_GAME","START","SELECT","END"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,IAAlC,QAA8C,cAA9C;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAGA,MAAMC,gBAAgB,GAAG,MAAM;AAC7B,MAAIC,MAAJ;;AAEA,QAAMC,SAAS,GAAGV,KAAK,IAAIW,KAAK,IAAI;AAClCC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAGd,KAAK,IAAIW,KAAK,IAAI;AACrCC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,GAFD;;AAIA,QAAME,SAAS,GAAGf,KAAK,IAAIW,KAAK,IAAI,CAClC;AACD,GAFD;;AAIA,SAAOX,KAAK,IAAIgB,IAAI,IAAIC,MAAM,IAAI;AAChC,YAAQA,MAAM,CAACC,IAAf;AACE,WAAK,SAAL;AACE,YAAIT,MAAJ,EAAYA,MAAM,CAACU,KAAP;AAEZV,QAAAA,MAAM,GAAGA,MAAM,CAACQ,MAAM,CAACG,MAAR,CAAf;AACAX,QAAAA,MAAM,CACHY,EADH,CACM,SADN,EACiBX,SAAS,CAACV,KAAD,CAD1B,EAEGqB,EAFH,CAEM,SAFN,EAEiBN,SAAS,CAACf,KAAD,CAF1B,EAGGqB,EAHH,CAGM,YAHN,EAGoBC,YAAY,CAACtB,KAAD,CAHhC;AAIA;;AAEF,WAAK,YAAL;AACE,YAAIS,MAAJ,EAAYA,MAAM,CAACU,KAAP;AACZV,QAAAA,MAAM,GAAG,IAAT;AACAG,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA;;AAEF,WAAKX,IAAI,CAACqB,KAAV;AACA,WAAKrB,IAAI,CAACsB,MAAV;AACEf,QAAAA,MAAM,CAACgB,IAAP,CAAY,WAAZ,EAAyBR,MAAzB;AACA;;AAEF,WAAKd,KAAK,CAACuB,QAAX;AACA,WAAKvB,KAAK,CAACwB,WAAX;AACA,WAAKxB,KAAK,CAACyB,MAAX;AACEnB,QAAAA,MAAM,CAACgB,IAAP,CAAY,YAAZ,EAA0BR,MAA1B;AACA;;AAEF,WAAKb,IAAI,CAACyB,KAAV;AACA,WAAKzB,IAAI,CAAC0B,IAAV;AACA,WAAK1B,IAAI,CAAC2B,WAAV;AACA,WAAK3B,IAAI,CAAC4B,QAAV;AACEvB,QAAAA,MAAM,CAACgB,IAAP,CAAY,WAAZ,EAAyBR,MAAzB;AACA;;AAEF,WAAKZ,IAAI,CAAC4B,KAAV;AACA,WAAK5B,IAAI,CAAC6B,MAAV;AACA,WAAK7B,IAAI,CAAC8B,GAAV;AACE1B,QAAAA,MAAM,CAACgB,IAAP,CAAY,WAAZ,EAAyBR,MAAzB;AACA;;AAGF;AACA,eAAOD,IAAI,CAACC,MAAD,CAAX;AA3CF;AA6CD,GA9CD;AA+CD,CA9DD,C,CAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAeT,gBAAf","sourcesContent":["import socketIOClient from 'socket.io-client';\nimport store from './store/';\nimport { ENDPOINT } from './constants/socket.types';\nimport { USER, LOBBY, ROOM, GAME, CHAT } from './constants/';\nimport ACTION from './actions';\n\n\nconst socketMiddleware = () => {\n  let socket;\n\n  const onConnect = store => event => {\n    console.log('Howdy!');\n  };\n\n  const onDisconnect = store => event => {\n    console.log('Bowdy?');\n  };\n\n  const onMessage = store => event => {\n    //TODO: I guess this is where we handle the server data\n  };\n\n  return store => next => action => {\n    switch (action.type) {\n      case 'CONNECT':\n        if (socket) socket.close();\n\n        socket = socket(action.server);\n        socket\n          .on('connect', onConnect(store))\n          .on('message', onMessage(store))\n          .on('disconnect', onDisConnect(store));\n        break;\n\n      case 'DISCONNECT':\n        if (socket) socket.close();\n        socket = null;\n        console.log('Disconnected.');\n        break;\n\n      case USER.LOGIN:\n      case USER.LOGOUT:\n        socket.emit('eventUser', action);\n        break;\n\n      case LOBBY.ADD_ROOM:\n      case LOBBY.REMOVE_ROOM:\n      case LOBBY.UPDATE:\n        socket.emit('eventLobby', action);\n        break;\n\n      case ROOM.ENTER:\n      case ROOM.EXIT:\n      case ROOM.SUBMIT_MOVE:\n      case ROOM.END_GAME:\n        socket.emit('eventRoom', action);\n        break;\n\n      case GAME.START:\n      case GAME.SELECT:\n      case GAME.END:\n        socket.emit('eventGame', action);\n        break;\n\n\n      default:\n      return next(action);\n    }\n  };\n}\n\n// function Socket () {\n//   this.io = socketIOClient.connect('ws://localhost:3001');\n//\n//   this.io\n//     .on('connect', () => console.log('howdy'))\n//     .on(LOBBY.UPDATE, (data) => store.dispatch(ACTION.LOBBY.update(data)))\n//     .on(LOBBY.ADD_ROOM, (data) => store.dispatch(ACTION.LOBBY.update(data)))\n//     .on('recieveMove', data => {\n//       console.log(data);\n//     });\n// }\n//\n// const socket = new Socket();\n\nexport default socketMiddleware;\n"]},"metadata":{},"sourceType":"module"}