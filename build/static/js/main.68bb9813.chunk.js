(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t){e.exports.cellType=function(e,t){var o;switch(!0){case 1===t&&2===e||6===t&&5===e:o=2;break;case 3===t&&2===e||4===t&&5===e:o=3;break;case 4===t&&2===e||3===t&&5===e:o=4;break;case 5===t&&3===e||2===t&&4===e:o=5;break;case 5===t&&4===e||2===t&&3===e:o=6;break;case 6===t&&2===e||1===t&&5===e:o=7;break;default:o=(e+t)%2===0?0:1}return o},e.exports.inBounds=function(e,t){return e>-1&&e<8&&t>-1&&t<8}},12:function(e,t,o){e.exports=o(26)},17:function(e,t,o){},18:function(e,t,o){},19:function(e,t,o){},26:function(e,t,o){"use strict";o.r(t);var r,n=o(0),a=o.n(n),i=o(11),s=o.n(i),c=(o(17),o(18),o(2)),l=o(3),h=o(5),p=o(4),u=o(6),d=o(7),v=(o(19),o(8)),w=o.n(v),f=(o(20),o(10)),m=8,b=1,y=2,g=(r={},Object(d.a)(r,b,{name:"Player One",class:"player-one"}),Object(d.a)(r,y,{name:"Player Two",class:"player-two"}),r),M=["gray1","gray2","pink","red","orange","yellow","green","blue"];function P(e){var t="",o=e.board.pieces[e.piece];return null!==e.piece&&(t+=g[o.player].class,o.cloned&&(t+=" cloned"),e.selected&&(t+=" selected")),a.a.createElement("div",{className:t})}var k=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="cell "+M[f.cellType(this.props.row,this.props.column)]+(this.props.highlight?" highlight":"");return a.a.createElement("div",{className:t,onClick:function(){return e.props.selectCell(e.props.row,e.props.column)}},null!==this.props.val&&a.a.createElement(P,{piece:this.props.val,board:this.props.board,selected:!!this.props.selected}))}}]),t}(n.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedPiece?this.props.selectedPiece.col:null,o=this.props.row.map(function(o,r){return a.a.createElement(k,{key:r,val:o.who,board:e.props.board,row:e.props.ri,column:r,highlight:!1!==o.move,selected:r===t,selectCell:e.props.selectCell})});return a.a.createElement("span",{className:"row"}," ",o," ")}}]),t}(n.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedPiece?this.props.selectedPiece.row:null,o=this.props.board.board.map(function(o,r){return a.a.createElement(C,{key:r,board:e.props.board,row:o,selectedPiece:r===t?e.props.selectedPiece:null,ri:r,pieces:e.props.board.pieces,selectCell:e.props.selectCell})});return a.a.createElement("div",{className:"board"}," ",o," ")}}]),t}(n.Component);function O(e){var t=g[e.player].name;return a.a.createElement("div",{id:"winner"},a.a.createElement("div",null,a.a.createElement("p",null,t," has won the game!"),a.a.createElement("button",{onClick:e.restart},"Play again?")))}var j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={board:new w.a(m,b,y),turn:b,continuedMove:!1,selectedPiece:null,winner:null},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.turn!==this.state.turn?this.state.board.movesLeft(this.state.turn)||(console.log("${this.state.turn} has no more moves!"),this.setState({winner:this.nextPlayer()})):this.state.selectedPiece}},{key:"selectCell",value:function(e,t){if(this.state.continuedMove){var o=this.state.board;o.validMove(e,t)?this.handleMove(e,t):(this.setState({board:o,turn:this.nextPlayer(this.state.turn),continuedMove:!1,selectedPiece:null}),o.updateBoard())}else this.canSelectPiece(e,t)?this.setPiece(e,t):this.state.selectedPiece&&this.handleMove(e,t)}},{key:"handleMove",value:function(e,t){var o=this.state.board;if(o.validMove(e,t)){console.log("handling move...");var r,n=this.state.selectedPiece,a=o.board[n.row][n.col].who;o.isCloneSpawn(a,e,t)?o.makeClone(a,e,t):r=o.doMove(a,e,t),o.canContinueMove(a,r)?(o.getMoves(a,3,r.rowIncr,r.colIncr),this.setState({board:o,turn:this.state.turn,continuedMove:r,selectedPiece:{row:e,col:t}})):this.setState({board:o,turn:this.nextPlayer(this.state.turn),continuedMove:!1,selectedPiece:null})}else console.log("Invalid move!")}},{key:"canSelectPiece",value:function(e,t){var o=this.state,r=o.board.board[e][t].who;return null!==r&&o.board.pieces[r].player===o.turn}},{key:"setPiece",value:function(e,t){var o=this.state.board;o.updateBoard(),o.getMoves(o.board[e][t].who),this.setState({selectedPiece:{row:e,col:t}})}},{key:"nextPlayer",value:function(){return this.state.turn===b?y:b}},{key:"restart",value:function(){this.setState({board:new w.a(m,b,y),continuedMove:!1,turn:b,selectedPiece:null,winner:null})}},{key:"render",value:function(){return a.a.createElement("div",{className:"Leap"},a.a.createElement("div",{className:"Leap-header"},a.a.createElement("h2",null,"Leap")),this.state.winner&&a.a.createElement(O,{player:this.state.winner,restart:this.restart.bind(this)}),a.a.createElement("h3",null,"Current turn: ",g[this.state.turn].name,a.a.createElement("span",{className:g[this.state.turn].class+"-token"})),a.a.createElement("div",{className:"game-container"},a.a.createElement("div",{className:"game-options"}),a.a.createElement(E,{board:this.state.board,selectedPiece:this.state.selectedPiece,selectCell:this.selectCell.bind(this)}),a.a.createElement("div",{className:"game-menu"})))}}]),t}(n.Component);var I=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,o){var r=o(10);function n(e,t,o){this.p1=t,this.p2=o,this.board=this.initBoard(e),this.piecesSeparator=8,this.pieces=this.initPieces(e,t,o),this.updateBoard()}n.prototype.updateBoard=function(e){var t=this;this.board=e?this.board.map(function(e){return e.map(function(e,o){return null!=e.who?(e.who>=t.piecesSeparator&&e.who++,t.pieces[e.who].alive?{who:e.who,move:!1}:{who:null,move:!1}):{who:null,move:!1}})}):this.board.map(function(e){return e.map(function(e,o){return null!=e.who&&t.pieces[e.who].alive?{who:e.who,move:!1}:{who:null,move:!1}})})},n.prototype.initBoard=function(e){for(var t=[],o=[],r=[],n=0;n<e;n++)o.push({who:n,move:!1}),r.push({who:n+8,move:!1});t.push(o);for(var a=1;a<e-1;a++)t.push(Array(e).fill({who:null,move:!1}));return t.push(r),t},n.prototype.initPieces=function(e){for(var t=[],o=[],r=0;r<e;r++)t.push({player:this.p1,cloned:!1,row:7,col:r,alive:!0}),o.push({player:this.p2,cloned:!1,row:0,col:r,alive:!0});return o.concat(t)},n.prototype.insertAtSeparationIndex=function(){for(var e=this.piecesSeparator;e<this.pieces.length;e++)if(this.pieces[e].player!==this.p2)return this.piecesSeparator=e,e},n.prototype.makeClone=function(e,t,o){var r=this.pieces[e];r.cloned=!0;var n={player:r.player,cloned:!0,row:t,col:o,alive:!0};return this.pieces.splice(this.insertAtSeparationIndex(),0,n),this.updateBoard(!0),this.board[t][o].who=this.piecesSeparator,!0},n.prototype.canClone=function(e){var t=this.pieces[e];return!t.cloned&&t.col<7&&t.col>0&&(t.player===this.p1&&!t.row||t.player===this.p2&&7===t.row)},n.prototype.isCloneSpawn=function(e,t,o){return this.canClone(e)&&null===this.board[t][o].who},n.prototype.getPlayer=function(e){return this.pieces[e].player},n.prototype.isLeap=function(e,t,o,r,n,a){var i=this.board[7-e.row][7-e.col];if(r&&!i.who){var s=n.who,c=this.board[7-(e.row+t)][7-(e.col+o)].who;if((s||c)&&(!s||!c)){var l=s||c;if(a)return!0;i.move=l}}},n.prototype.isJump=function(e,t,o,n,a){if(r.inBounds(e.row+2*t,e.col+2*o)){var i=this.board[e.row+2*t][e.col+2*o];if(this.getPlayer(n.who)!==e.player&&null===i.who){if(a%3)return!0;i.move=n.who}}},n.prototype.isPhase=function(e,t){var o=r.cellType(e.row,e.col)>1,n=this.board[7-e.row][7-e.col];if(o&&null===n.who){if(t%3)return!0;n.move=!0}},n.prototype.getCloneSpawns=function(e,t){for(var o=e.player===this.p1?7:0,r=1;r<7;r++){var n=this.board[o][r];if(null===n.who){if(t%3)return!0;n.move=!0}}},n.prototype.getMovesInDirection=function(e,t,o,n){if(r.inBounds(e.row+o,e.col+n)&&(o||n)){var a=this.board[e.row+o][e.col+n],i=r.cellType(e.row+o,e.col+n)>1;if(this.isLeap(e,o,n,i,a,t))return!0;if(null!==a.who){if(this.isJump(e,o,n,a,t))return!0}else{if(t%3%2)return!0;t||(a.move=!0)}}return!1},n.prototype.getMoves=function(e,t,o,r){var n=this.pieces[e];if(this.isPhase(n,t))return!0;if(this.canClone(e)&&this.getCloneSpawns(n,t))return!0;if(null!=o&&null!=r){if(this.getMovesInDirection(n,t,o,r))return!0}else for(o=-1;o<2;o++)for(r=-1;r<2;r++)if(this.getMovesInDirection(n,t,o,r))return!0;return!1},n.prototype.doMove=function(e,t,o){var r=this.pieces[e];this.board[r.row][r.col].who=null;var n,a=this.board[t][o],i="number"===typeof a.move&&a.move;if(i){var s=this.pieces[i];s.alive=!1,this.board[s.row][s.col].who=null;var c=Math.abs(s.row-r.row)<2&&Math.abs(s.col-r.col)<2,l=Math.abs(t-s.row)<2&&Math.abs(o-s.col)<2;n=c&&l?{rowIncr:Math.sign(t-s.row),colIncr:Math.sign(o-s.col)}:c?{rowIncr:Math.sign(s.row-r.row),colIncr:Math.sign(s.col-r.row)}:{rowIncr:Math.sign(t-s.row),colIncr:Math.sign(o-s.col)}}else this.samePhase(r,{row:t,col:o})||(n={rowIncr:0,colIncr:0});return this.board[t][o].who=e,r.row=t,r.col=o,this.canClone(e)&&(n={rowIncr:0,colIncr:0}),this.updateBoard(),n},n.prototype.samePhase=function(e,t){var o=r.cellType(t.row,t.col);return o>1&&o===r.cellType(e.row,e.col)},n.prototype.canContinueMove=function(e,t){return!!t&&this.getMoves(e,2,t.rowIncr,t.colIncr)},n.prototype.hasMoves=function(e){return this.getMoves(e,1)},n.prototype.movesLeft=function(e){for(var t=0;t<this.pieces.length;t++){var o=this.pieces[t];if(o.alive&&o.player===e&&this.hasMoves(t))return!0}return!1},n.prototype.validMove=function(e,t){return this.board[e][t].move},e.exports=n}},[[12,1,2]]]);
//# sourceMappingURL=main.68bb9813.chunk.js.map